{namespace ar=Sng\AdditionalReports\ViewHelpers}

<ar:widget.paginateQuery query="{query}" as="paginatedItems" configuration="{itemsPerPage: extconf.itemsPerPage, insertAbove: 1, insertBelow: 1, pagesAfter: 1, pagesBefore: 1, forceFirstPrevNextlast: 1}">
    <table cellspacing="1" cellpadding="2" border="0" class="table table-striped table-hover">
        <thead>
        <tr>
            <th colspan="3">
                <f:translate key="LLL:EXT:additional_reports/Resources/Private/Language/locallang.xlf:logerrors_description"/>
            </th>
        </tr>
        <tr>
            <th width="100">
                <f:translate key="LLL:EXT:additional_reports/Resources/Private/Language/locallang.xlf:counter"/>
                <a href="{baseUrl}&orderby=nb%20DESC,tstamp%20DESC"><img src="{requestDir}../typo3conf/ext/additional_reports/Resources/Public/Icons/reddown.gif"/></a>
                <a href="{baseUrl}&orderby=nb%20ASC,tstamp%20DESC"><img src="{requestDir}../typo3conf/ext/additional_reports/Resources/Public/Icons/redup.gif"/></a>
                <f:format.raw>{ordercounter}</f:format.raw>
            </th>
            <th width="100">
                <f:translate key="LLL:EXT:additional_reports/Resources/Private/Language/locallang.xlf:tstamp"/>
                <a href="{baseUrl}&orderby=tstamp%20DESC,nb%20DESC"><img src="{requestDir}../typo3conf/ext/additional_reports/Resources/Public/Icons/reddown.gif"/></a>
                <a href="{baseUrl}&orderby=tstamp%20ASC,nb%20DESC"><img src="{requestDir}../typo3conf/ext/additional_reports/Resources/Public/Icons/redup.gif"/></a>
                <f:format.raw>{ordertstamp}</f:format.raw>
            </th>
            <th>
                <f:translate key="LLL:EXT:additional_reports/Resources/Private/Language/locallang.xlf:error"/>
            </th>
        </tr>
        </thead>
        <tbody>
        <f:for each="{paginatedItems}" as="item">
            <tr>
                <td>{item.nb}</td>
                <td>
                    <f:format.date format="d/m/Y H:i:s">@{item.tstamp}</f:format.date>
                </td>
                <td>
                    {item.details}<br/>
                    <img src="{requestDir}../typo3conf/ext/additional_reports/Resources/Public/Icons/garbage.gif"/>DELETE FROM sys_log WHERE error>0 AND details = "{item.details}"
                </td>
            </tr>
        </f:for>
        </tbody>
    </table>
</ar:widget.paginateQuery>