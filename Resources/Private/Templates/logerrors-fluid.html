{namespace ar=Tx_AdditionalReports_ViewHelpers}

<ar:widget.paginateQuery query="{query}" as="paginatedItems" configuration="{itemsPerPage: extconf.itemsPerPage, insertAbove: 1, insertBelow: 1, pagesAfter: 1, pagesBefore: 1, forceFirstPrevNextlast: 1}">
    <table cellspacing="1" cellpadding="2" border="0" class="tx_sv_reportlist typo3-dblist">
        <tr class="t3-row-header">
            <td colspan="8">
                <f:translate key="LLL:EXT:additional_reports/locallang.xml:logerrors_description"/>
            </td>
        </tr>
        <tr class="c-headLine">
            <td class="cell" width="100">
                <f:translate key="LLL:EXT:additional_reports/locallang.xml:counter"/>
                <a href="{baseUrl}&orderby=nb%20DESC,tstamp%20DESC"><img src="{requestDir}sysext/t3skin/icons/gfx/reddown.gif"/></a>
                <a href="{baseUrl}&orderby=nb%20ASC,tstamp%20DESC"><img src="{requestDir}sysext/t3skin/icons/gfx/redup.gif"/></a>
                <ar:raw>{ordercounter}</ar:raw>
            </td>
            <td class="cell" width="100">
                <f:translate key="LLL:EXT:additional_reports/locallang.xml:tstamp"/>
                <a href="{baseUrl}&orderby=tstamp%20DESC,nb%20DESC"><img src="{requestDir}sysext/t3skin/icons/gfx/reddown.gif"/></a>
                <a href="{baseUrl}&orderby=tstamp%20ASC,nb%20DESC"><img src="{requestDir}sysext/t3skin/icons/gfx/redup.gif"/></a>
                <ar:raw>{ordertstamp}</ar:raw>
            </td>
            <td class="cell">
                <f:translate key="LLL:EXT:additional_reports/locallang.xml:error"/>
            </td>
        </tr>
        <f:for each="{paginatedItems}" as="item">
            <tr class="db_list_normal">
                <td class="cell">{item.nb}</td>
                <td class="cell">
                    <f:format.date format="d/m/Y H:i:s">@{item.tstamp}</f:format.date>
                </td>
                <td class="cell">
                    {item.details}<br/>
                    <img src="{requestDir}sysext/t3skin/icons/gfx/garbage.gif"/>DELETE FROM sys_log WHERE error>0 AND details = "{item.details}"
                </td>
            </tr>
        </f:for>
    </table>
</ar:widget.paginateQuery>